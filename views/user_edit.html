<div class="col-md-3">
	<div class="panel">
		<div class="panel-body text-center">
			<img src="{{.User.LargeAvatarUrl}}">
			<div>
				<br><br>
				<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#avatarModal">修改头像</button>
			</div>
		</div>
	</div>
</div>
<div class="col-md-6">
	<div class="panel panel-primary">
		<div class="panel-heading">资料</div>
		<div class="panel-body">
			<form id="UserEditForm" name="UserEditForm" method="post" action="{{urlfor "UserController.DoEdit" ":username" .TheUser.Username}}">
				{{ .xsrf_html }}
				<input name="action" type="hidden" value="UpdateUser">
				<fieldset>
					<!-- Appended checkbox -->
					<div class="form-group">
						<label class="control-label" for="Email">电子邮件</label>
						<div class="input-group">
							<input id="Email" name="Email" class="form-control" placeholder="电子邮件" type="text" value="{{.UserEditForm.Email}}">
							<span class="input-group-addon">     
								<input id="PublicEmail" name="PublicEmail" type="checkbox" value="1" {{if .UserEditForm.PublicEmail}}checked{{end}}> 公开     
							</span>
						</div>
					</div>

					<div class="form-group">
						<label class="control-label" for="Nickname">昵称</label>  
						<input id="Nickname" name="Nickname" placeholder="昵称" class="form-control input-md" type="text" value="{{.UserEditForm.Nickname}}">
					</div>

					<div class="form-group">
						<label class="control-label" for="Info">个人简介</label>                 
						<textarea class="form-control" id="Info" name="Info" rows="5">{{.UserEditForm.Info}}</textarea>
					</div>

					<div class="form-group">
						<label class="control-label" for="Company">公司</label>  
						<input id="Company" name="Company" placeholder="公司" class="form-control input-md" type="text" value="{{.UserEditForm.Company}}">
					</div>

					<div class="form-group">
						<label class="control-label" for="Location">所在地</label>  
						<input id="Location" name="Location" placeholder="所在地" class="form-control input-md" type="text" value="{{.UserEditForm.Location}}">
					</div>

					<div class="form-group">
						<label class="control-label" for="Url">网址</label>  
						<input id="Url" name="Url" placeholder="网址" class="form-control input-md" type="text" value="{{.UserEditForm.Url}}">
					</div>

					<div class="form-group">
						<label class="control-label" for="Qq">QQ</label>  
						<input id="Qq" name="Qq" placeholder="QQ号" class="form-control input-md" type="text" value="{{.UserEditForm.Qq}}">
					</div>

					<div class="form-group">
						<label class="control-label" for="WeChat">微信</label>
						<div>
							<a id="WeChat" href="#" class="btn btn-primary" role="button">微信二维码</a>
						</div>
					</div>

					<div class="form-group">
						<label class="control-label" for="Weibo">微博</label>  
						<input id="Weibo" name="Weibo" placeholder="微博用户名" class="form-control input-md" type="text" value="{{.UserEditForm.Weibo}}">
					</div>

					<div class="form-group">
						<button id="" name="" class="btn btn-block btn-primary">保存</button>
					</div>

				</fieldset>
			</form>

		</div>
	</div>
</div>
<div class="col-md-3">
	<div class="panel panel-primary">
		<div class="panel-heading">密码</div>
		<div class="panel-body">
			<form id="UserPasswordForm" name="UserEditForm" method="post" action="{{urlfor "UserController.DoEdit" ":username" .TheUser.Username}}">
				{{ .xsrf_html }}
				<input name="action" type="hidden" value="UpdatePassword">
				<fieldset>
					<!-- Appended checkbox -->
					<div class="form-group">
						<label class="control-label" for="CurrentPassword">当前密码</label>
						<input id="CurrentPassword" name="CurrentPassword" class="form-control" type="password" {{.UserPasswordForm.CurrentPassword}}>
					</div>

					<div class="form-group">
						<label class="control-label" for="Password">密码</label>  
						<input id="Password" name="Password" placeholder="请输入新密码" class="form-control input-md" type="password" value="{{.UserPasswordForm.Password}}">
					</div>

					<div class="form-group">
						<input name="PasswordConfirm" class="form-control" placeholder="重复密码" value="{{.UserPasswordForm.PasswordConfirm}}" type="password">
					</div>

					<div class="form-group">
						<button id="" name="" class="btn btn-block btn-primary">修改密码</button>
					</div>
				</fieldset>
			</form>
		</div>
	</div>
</div>

<div id="avatarModal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">修改头像</h4>
      </div>
      <div class="modal-body">
        <img src="{{.User.LargeAvatarUrl}}">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-primary">保存</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script src="/static/js/jquery.validate.min.js"></script>
<script src="/static/js/jquery.passstrength.min.js"></script>
<script src="/static/js/jquery.email-autocomplete.min.js"></script>
<script src="/static/js/mailcheck.min.js"></script>
<script>
$(function() {
	$.validator.setDefaults({
		errorClass: "has-error"
	});
	var validatorForUserEditForm = $("#UserEditForm").validate({
		onkeyup:false,
		rules: {
			Email: {
				required: true,
				email: true,
			},
			Url:{
				url: true,
			}
		},
		messages: {
			Email: {
				required: "请输入电子邮件",
				email: "请输入正确的电子邮件地址",
			},
			Url:{
				url: "网址格式错误",
			}
		},
	});
	//显示服务端错误信息
	{{if .UserEditFormValidErrors}}
	validatorForUserEditForm.showErrors({
		{{range .UserEditFormValidErrors}}
		"{{.Field}}": "{{.Message}}",
		{{end}}
	});
	{{end}}
});
</script>